<!DOCTYPE html>
<html lang='eng'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=browser-width, initial-scale=1'>
  <meta property="og:image" content="images/fldwrk.jpg" />
  <title>cipher</title>
  
  <!-- Stylesheets -->
  <link href='../index.css' rel='stylesheet' type='text/css'/>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300" rel="stylesheet">
  
</head>
<body>

<div style="height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center;">
  <img src="../images/fld_wrk_stylized.jpg" style="width:200px;" />
  <input type="text" id="passcode" oninput="solve()" style="margin:25px; background-color:black; color: white; border: 1px solid white;">
  <div id="solution" style="max-width:200px; height:17.5px; width:165px; word-wrap: break-word; overflow: hidden;"></div>
</div>

<!-- JQuery -->
<script src='https://code.jquery.com/jquery-3.5.1.slim.min.js' integrity='sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj' crossorigin='anonymous'></script>

<script>

  function solve() {
    var input = document.getElementById("passcode");
    var key = input.value;
    var decoded = decode(11.026654872545283 * encode(key) + -5091456643.487767);
    document.getElementById("solution").innerHTML = decoded;
  }

  function encode(key) {
    const nums = [];
    for(var i=0; i<key.length; i++) {
        nums[i] = (key.toLowerCase().charCodeAt(i) - 97 + 1).toString().padStart(2, '0');
    }
    num = (nums.join(''));
    return Number(num);
  }

  function decode(cipher) {
    cipher = Math.floor(cipher).toString();
    cipher.padStart(2*Math.ceil(cipher.length/2), '0');
    console.log(cipher)
    const nums = cipher.toString().match(/..?/g);
    console.log(nums);
    const letters = [];
    for(var i=0; i<nums.length; i++) {
        letters[i] = String.fromCharCode(Number(nums[i]) + 97 - 1);
    }
    var pt = letters.join('');
    return pt;
  }

</script>

</body>  
</script>
</html>
